<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>Cat√°logo | NeuroLearn</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* VARI√ÅVEIS E RESET */
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #10b981;
            --dark: #0f172a;
            --light: #f8fafc;
            --glass: rgba(255, 255, 255, 0.1);
            --glass-dark: rgba(15, 23, 42, 0.7);
            --border-glow: rgba(99, 102, 241, 0.3);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --shadow-hover: 0 20px 50px rgba(99, 102, 241, 0.3);
            --radius: 20px;
            --radius-small: 12px;
            --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: var(--light);
            min-height: 100vh;
            padding-bottom: 80px;
        }

        /* NAVBAR (Igual ao index) */
        .navbar {
            background: var(--glass-dark);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-glow);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 15px 20px;
        }

        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-decoration: none;
        }

        .logo i {
            font-size: 1.8rem;
        }

        .back-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: var(--glass);
            border: 1px solid var(--border-glow);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--light);
            text-decoration: none;
            transition: var(--transition);
        }

        .back-btn:hover {
            background: rgba(99, 102, 241, 0.2);
            transform: translateX(-3px);
        }

        /* HEADER DO CAT√ÅLOGO */
        .catalog-header {
            padding: 100px 20px 30px;
            text-align: center;
        }

        .catalog-title {
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 800;
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .catalog-subtitle {
            color: #94a3b8;
            max-width: 600px;
            margin: 0 auto 40px;
        }

        /* FILTROS AVAN√áADOS */
        .filters-section {
            max-width: 1200px;
            margin: 0 auto 40px;
            padding: 0 20px;
        }

        .filter-container {
            background: var(--glass);
            border: 1px solid var(--border-glow);
            border-radius: var(--radius);
            padding: 25px;
            margin-bottom: 20px;
        }

        .filter-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 1.2rem;
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .filter-label {
            font-size: 0.9rem;
            color: #94a3b8;
            margin-bottom: 5px;
        }

        .filter-select {
            padding: 15px;
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid var(--border-glow);
            border-radius: var(--radius-small);
            color: var(--light);
            font-size: 1rem;
            outline: none;
            transition: var(--transition);
            cursor: pointer;
        }

        .filter-select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.2);
        }

        .filter-select option {
            background: var(--dark);
            color: var(--light);
        }

        /* BOT√ïES DE CURSO */
        .course-tabs {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 30px;
        }

        .course-tab {
            padding: 15px 30px;
            background: var(--glass);
            border: 1px solid var(--border-glow);
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .course-tab.active {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-color: transparent;
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);
        }

        .course-tab:hover:not(.active) {
            background: rgba(99, 102, 241, 0.2);
            transform: translateY(-3px);
        }

        /* GRADE DE PRODUTOS */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            padding: 0 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .product-card {
            background: var(--glass);
            border: 1px solid var(--border-glow);
            border-radius: var(--radius);
            padding: 25px;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-hover);
            border-color: var(--primary);
        }

        .product-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--secondary);
            color: var(--dark);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .product-image {
            width: 100%;
            height: 180px;
            background: linear-gradient(135deg, #334155, #475569);
            border-radius: var(--radius-small);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: var(--primary);
        }

        .product-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .product-meta {
            display: flex;
            justify-content: space-between;
            color: #94a3b8;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .price-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 20px 0;
        }

        .old-price {
            text-decoration: line-through;
            color: #94a3b8;
            font-size: 1rem;
        }

        .new-price {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--secondary);
        }

        /* BARRA INFERIOR */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--glass-dark);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--border-glow);
            display: flex;
            justify-content: space-around;
            padding: 15px 10px;
            z-index: 1000;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #94a3b8;
            text-decoration: none;
            padding: 10px 15px;
            border-radius: var(--radius-small);
            transition: var(--transition);
            position: relative;
        }

        .nav-item.active {
            color: var(--primary);
            background: rgba(99, 102, 241, 0.1);
        }

        .nav-item:hover {
            color: var(--primary);
            background: rgba(99, 102, 241, 0.1);
        }

        .nav-item i {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .nav-label {
            font-size: 0.8rem;
            font-weight: 500;
        }

        .badge {
            position: absolute;
            top: 5px;
            right: 10px;
            background: #ef4444;
            color: white;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* SEMESTRE HEADER */
        .semester-header {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(16, 185, 129, 0.1));
            border: 1px solid var(--border-glow);
            border-radius: var(--radius);
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .semester-title {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .semester-subtitle {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        /* CONTADOR DE RESULTADOS */
        .results-count {
            text-align: center;
            margin: 30px 0;
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .highlight {
            color: var(--primary);
            font-weight: 600;
        }

        /* ANIMA√á√ïES */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        /* RESPONSIVIDADE */
        @media (max-width: 768px) {
            .products-grid {
                grid-template-columns: 1fr;
                padding: 0 15px;
            }
            
            .filter-grid {
                grid-template-columns: 1fr;
            }
            
            .course-tabs {
                flex-direction: column;
                align-items: center;
            }
            
            .course-tab {
                width: 100%;
                justify-content: center;
            }
            
            .catalog-header {
                padding: 90px 15px 20px;
            }
            
            .nav-label {
                display: none;
            }
            
            .nav-item {
                padding: 10px;
            }
        }

        @media (min-width: 769px) and (max-width: 1024px) {
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- NAVBAR -->
    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html" class="back-btn">
                <i class="fas fa-arrow-left"></i>
            </a>
            
            <a href="index.html" class="logo">
                <i class="fas fa-brain"></i>
                <span>Cat√°logo</span>
            </a>
            
            <div style="width: 45px;"></div>
        </div>
    </nav>

    <!-- HEADER -->
    <header class="catalog-header">
        <h1 class="catalog-title">Biblioteca Digital</h1>
        <p class="catalog-subtitle">
            Explore nossa cole√ß√£o completa de e-books de Enfermagem e ESMI
        </p>
    </header>

    <!-- FILTROS -->
    <section class="filters-section">
        <div class="filter-container">
            <div class="filter-title">
                <i class="fas fa-sliders-h"></i>
                <span>Filtros Avan√ßados</span>
            </div>
            
            <!-- ABA DE CURSOS -->
            <div class="course-tabs">
                <div class="course-tab active" data-curso="todos">
                    <i class="fas fa-layer-group"></i>
                    <span>Todos os Cursos</span>
                </div>
                <div class="course-tab" data-curso="enfermagem">
                    <i class="fas fa-user-nurse"></i>
                    <span>Enfermagem Geral</span>
                </div>
                <div class="course-tab" data-curso="esmi">
                    <i class="fas fa-baby"></i>
                    <span>ESMI</span>
                </div>
            </div>

            <!-- FILTROS DIN√ÇMICOS -->
            <div class="filter-grid">
                <div class="filter-group">
                    <div class="filter-label">
                        <i class="fas fa-calendar-alt"></i> Ano
                    </div>
                    <select class="filter-select" id="filterAno">
                        <option value="todos">Todos os Anos</option>
                        <option value="1">1¬∫ Ano</option>
                        <option value="2">2¬∫ Ano</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <div class="filter-label">
                        <i class="fas fa-clock"></i> Semestre
                    </div>
                    <select class="filter-select" id="filterSemestre">
                        <option value="todos">Todos os Semestres</option>
                        <option value="1">1¬∫ Semestre</option>
                        <option value="2">2¬∫ Semestre</option>
                        <option value="3">3¬∫ Semestre</option>
                        <option value="4">4¬∫ Semestre</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <div class="filter-label">
                        <i class="fas fa-sort-amount-down"></i> Ordenar por
                    </div>
                    <select class="filter-select" id="filterOrdenar">
                        <option value="recentes">Mais Recentes</option>
                        <option value="popular">Mais Populares</option>
                        <option value="preco_asc">Pre√ßo: Menor ‚Üí Maior</option>
                        <option value="preco_desc">Pre√ßo: Maior ‚Üí Menor</option>
                        <option value="nome">Ordem Alfab√©tica</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <div class="filter-label">
                        <i class="fas fa-tag"></i> Pre√ßo
                    </div>
                    <select class="filter-select" id="filterPreco">
                        <option value="todos">Qualquer Pre√ßo</option>
                        <option value="0-150">At√© 150 MT</option>
                        <option value="150-250">150 - 250 MT</option>
                        <option value="250-350">250 - 350 MT</option>
                        <option value="350+">Acima de 350 MT</option>
                    </select>
                </div>
            </div>
            
            <!-- CONTADOR DE RESULTADOS -->
            <div class="results-count">
                Mostrando <span id="resultCount" class="highlight">0</span> produtos
            </div>
        </div>
    </section>

    <!-- PRODUTOS -->
    <main>
        <div class="products-grid" id="productsContainer">
            <!-- Produtos ser√£o carregados via JavaScript -->
        </div>
    </main>

    <!-- BARRA INFERIOR -->
    <div class="bottom-nav">
        <a href="index.html" class="nav-item">
            <i class="fas fa-home"></i>
            <span class="nav-label">Home</span>
        </a>
        
        <a href="catalogo.html" class="nav-item active">
            <i class="fas fa-book-medical"></i>
            <span class="nav-label">Cat√°logo</span>
        </a>
        
        <a href="carrinho.html" class="nav-item">
            <i class="fas fa-shopping-cart"></i>
            <span class="nav-label">Carrinho</span>
            <span class="badge" id="cartCount">0</span>
        </a>
        
        <a href="conta.html" class="nav-item">
            <i class="fas fa-user"></i>
            <span class="nav-label">Conta</span>
        </a>
        
        <a href="admin.html" class="nav-item">
            <i class="fas fa-cog"></i>
            <span class="nav-label">Admin</span>
        </a>
    </div>

    <script>
        // BANCO DE DADOS COMPLETO
        const cursosCompletos = {
            enfermagem: {
                nome: "Enfermagem Geral",
                semestres: {
                    1: {
                        nome: "I Semestre",
                        modulos: [
                            {
                                id: 'enf1',
                                titulo: 'Integra√ß√£o e Orienta√ß√µes Gerais',
                                descricao: 'Introdu√ß√£o √† profiss√£o de enfermagem, √©tica profissional, normas institucionais e hist√≥rico da enfermagem.',
                                preco: 200,
                                preco_desconto: 150,
                                capa: 'üéì',
                                downloads: 1245,
                                avaliacao: 4.5,
                                tags: ['introdu√ß√£o', '√©tica', 'orienta√ß√£o', 'hist√≥ria'],
                                publicado: true
                            },
                            {
                                id: 'enf2',
                                titulo: 'Ci√™ncias Humanas',
                                descricao: 'Psicologia, sociologia e antropologia aplicadas √† sa√∫de. Rela√ß√£o profissional-paciente.',
                                preco: 220,
                                preco_desconto: 170,
                                capa: 'üß†',
                                downloads: 1100,
                                avaliacao: 4.3,
                                tags: ['humanas', 'psicologia', 'sociologia'],
                                publicado: true
                            },
                            {
                                id: 'enf3',
                                titulo: 'Introdu√ß√£o √† Inform√°tica',
                                descricao: 'Tecnologia da informa√ß√£o aplicada √† sa√∫de. Sistemas de informa√ß√£o hospitalar.',
                                preco: 180,
                                preco_desconto: 140,
                                capa: 'üíª',
                                downloads: 980,
                                avaliacao: 4.2,
                                tags: ['inform√°tica', 'tecnologia', 'sistemas'],
                                publicado: true
                            },
                            {
                                id: 'enf4',
                                titulo: 'Ci√™ncias Biol√≥gicas I',
                                descricao: 'Anatomia e fisiologia humana b√°sica para enfermeiros. Sistema esquel√©tico e muscular.',
                                preco: 250,
                                preco_desconto: 190,
                                capa: 'ü¶¥',
                                downloads: 1890,
                                avaliacao: 4.7,
                                tags: ['anatomia', 'biologia', 'fisiologia'],
                                publicado: true
                            },
                            {
                                id: 'enf5',
                                titulo: 'Ci√™ncias Biol√≥gicas II',
                                descricao: 'Continua√ß√£o da biologia humana. Sistemas cardiovascular, respirat√≥rio e digestivo.',
                                preco: 260,
                                preco_desconto: 200,
                                capa: '‚ù§Ô∏è',
                                downloads: 1750,
                                avaliacao: 4.6,
                                tags: ['cardiovascular', 'respirat√≥rio', 'digestivo'],
                                publicado: true
                            },
                            {
                                id: 'enf6',
                                titulo: 'Bases Cient√≠ficas para Pr√°tica de Enfermagem I',
                                descricao: 'Fundamentos cient√≠ficos da pr√°tica cl√≠nica de enfermagem. M√©todo cient√≠fico aplicado.',
                                preco: 300,
                                preco_desconto: 220,
                                capa: 'üî¨',
                                downloads: 2100,
                                avaliacao: 4.8,
                                tags: ['pr√°tica', 'cl√≠nica', 'fundamentos', 'cient√≠fico'],
                                publicado: true
                            }
                        ]
                    },
                    2: {
                        nome: "II Semestre",
                        modulos: [
                            {
                                id: 'enf7',
                                titulo: 'Bases Cient√≠ficas para Pr√°tica de Enfermagem II',
                                descricao: 'Fundamentos de enfermagem: t√©cnicas b√°sicas, cuidados fundamentais.',
                                preco: 280,
                                preco_desconto: 200,
                                capa: 'ü©∫',
                                downloads: 1950,
                                avaliacao: 4.6,
                                tags: ['t√©cnicas', 'cuidados', 'fundamentos'],
                                publicado: true
                            },
                            {
                                id: 'enf8',
                                titulo: 'Pr√°tica de Enfermagem/Promo√ß√£o de Sa√∫de e HIV',
                                descricao: 'Preven√ß√£o, cuidados e promo√ß√£o da sa√∫de relacionada ao HIV/AIDS.',
                                preco: 270,
                                preco_desconto: 210,
                                capa: 'üõ°Ô∏è',
                                downloads: 1780,
                                avaliacao: 4.7,
                                tags: ['hiv', 'preven√ß√£o', 'cuidados', 'aids'],
                                publicado: true
                            }
                        ]
                    },
                    3: {
                        nome: "III Semestre",
                        modulos: [
                            {
                                id: 'enf9',
                                titulo: 'Pr√°ticas de Enfermagem II',
                                descricao: 'Enfermagem m√©dico-cir√∫rgica: cuidados perioperat√≥rios.',
                                preco: 320,
                                preco_desconto: 250,
                                capa: 'üè•',
                                downloads: 1650,
                                avaliacao: 4.8,
                                tags: ['cir√∫rgica', 'perioperat√≥rio', 'm√©dico'],
                                publicado: true
                            },
                            {
                                id: 'enf10',
                                titulo: 'Pr√°ticas de Enfermagem III',
                                descricao: 'Enfermagem obst√©trica e pedi√°trica. Cuidados materno-infantis.',
                                preco: 310,
                                preco_desconto: 240,
                                capa: 'ü§∞',
                                downloads: 1580,
                                avaliacao: 4.7,
                                tags: ['obst√©trica', 'pedi√°trica', 'materno', 'infantil'],
                                publicado: true
                            },
                            {
                                id: 'enf11',
                                titulo: 'Pr√°ticas de Enfermagem IV',
                                descricao: 'Enfermagem em sa√∫de mental e geri√°trica. Cuidados especiais.',
                                preco: 290,
                                preco_desconto: 230,
                                capa: 'üß†',
                                downloads: 1420,
                                avaliacao: 4.6,
                                tags: ['mental', 'geri√°trica', 'psiquiatria'],
                                publicado: true
                            }
                        ]
                    },
                    4: {
                        nome: "IV Semestre",
                        modulos: [
                            {
                                id: 'enf12',
                                titulo: 'Aten√ß√£o B√°sica de Sa√∫de',
                                descricao: 'Sa√∫de p√∫blica, aten√ß√£o prim√°ria e cuidados comunit√°rios.',
                                preco: 240,
                                preco_desconto: 180,
                                capa: 'üèòÔ∏è',
                                downloads: 1350,
                                avaliacao: 4.5,
                                tags: ['b√°sica', 'p√∫blica', 'comunit√°ria'],
                                publicado: true
                            },
                            {
                                id: 'enf13',
                                titulo: 'Bioestat√≠stica e Investiga√ß√£o de Sa√∫de',
                                descricao: 'M√©todos estat√≠sticos aplicados √† pesquisa em sa√∫de.',
                                preco: 230,
                                preco_desconto: 170,
                                capa: 'üìä',
                                downloads: 1280,
                                avaliacao: 4.4,
                                tags: ['estat√≠stica', 'pesquisa', 'investiga√ß√£o'],
                                publicado: true
                            },
                            {
                                id: 'enf14',
                                titulo: 'Lideran√ßa, Gest√£o e Administra√ß√£o em Enfermagem',
                                descricao: 'Gest√£o de servi√ßos de sa√∫de e lideran√ßa em enfermagem.',
                                preco: 260,
                                preco_desconto: 200,
                                capa: 'üë®‚Äçüíº',
                                downloads: 1480,
                                avaliacao: 4.6,
                                tags: ['lideran√ßa', 'gest√£o', 'administra√ß√£o'],
                                publicado: true
                            },
                            {
                                id: 'enf15',
                                titulo: 'Ensino em Enfermagem',
                                descricao: 'Metodologias de ensino aplicadas √† forma√ß√£o de enfermeiros.',
                                preco: 220,
                                preco_desconto: 160,
                                capa: 'üìö',
                                downloads: 1150,
                                avaliacao: 4.3,
                                tags: ['ensino', 'educa√ß√£o', 'metodologia'],
                                publicado: true
                            },
                            {
                                id: 'enf16',
                                titulo: 'Est√°gio Rural e Integral',
                                descricao: 'Pr√°tica supervisionada em contextos rurais e integrados.',
                                preco: 350,
                                preco_desconto: 280,
                                capa: 'üåæ',
                                downloads: 980,
                                avaliacao: 4.7,
                                tags: ['est√°gio', 'rural', 'pr√°tica'],
                                publicado: true
                            }
                        ]
                    }
                }
            },
            esmi: {
                nome: "Enfermagem ESMI",
                semestres: {
                    1: {
                        nome: "I Semestre",
                        modulos: [
                            {
                                id: 'esmi1',
                                titulo: 'Integra√ß√£o e Orienta√ß√µes Gerais',
                                descricao: 'Introdu√ß√£o √† especializa√ß√£o ESMI. √âtica e normas espec√≠ficas.',
                                preco: 200,
                                preco_desconto: 150,
                                capa: 'üéì',
                                downloads: 1120,
                                avaliacao: 4.4,
                                tags: ['introdu√ß√£o', '√©tica', 'esmi'],
                                publicado: true
                            },
                            {
                                id: 'esmi2',
                                titulo: 'Ci√™ncias Humanas',
                                descricao: 'Aspectos psicossociais da sa√∫de materno-infantil.',
                                preco: 210,
                                preco_desconto: 160,
                                capa: 'üßò',
                                downloads: 1050,
                                avaliacao: 4.3,
                                tags: ['humanas', 'psicossocial', 'materno'],
                                publicado: true
                            },
                            {
                                id: 'esmi3',
                                titulo: 'Introdu√ß√£o √† Inform√°tica',
                                descricao: 'Sistemas de informa√ß√£o em sa√∫de materno-infantil.',
                                preco: 180,
                                preco_desconto: 140,
                                capa: 'üíª',
                                downloads: 950,
                                avaliacao: 4.2,
                                tags: ['inform√°tica', 'sistemas', 'digital'],
                                publicado: true
                            },
                            {
                                id: 'esmi4',
                                titulo: 'Ci√™ncias Biol√≥gicas I',
                                descricao: 'Anatomia e fisiologia do sistema reprodutivo feminino.',
                                preco: 240,
                                preco_desconto: 180,
                                capa: 'üî¨',
                                downloads: 1620,
                                avaliacao: 4.7,
                                tags: ['anatomia', 'reprodutivo', 'feminino'],
                                publicado: true
                            },
                            {
                                id: 'esmi5',
                                titulo: 'Ci√™ncias Biol√≥gicas II',
                                descricao: 'Fisiologia da gravidez e desenvolvimento fetal.',
                                preco: 250,
                                preco_desconto: 190,
                                capa: 'üë∂',
                                downloads: 1580,
                                avaliacao: 4.8,
                                tags: ['gravidez', 'fetal', 'desenvolvimento'],
                                publicado: true
                            }
                        ]
                    },
                    2: {
                        nome: "II Semestre",
                        modulos: [
                            {
                                id: 'esmi6',
                                titulo: 'Bases Cient√≠ficas para a Pr√°tica de Enfermagem I',
                                descricao: 'Preven√ß√£o e controle de infec√ß√µes em maternidades.',
                                preco: 270,
                                preco_desconto: 210,
                                capa: 'ü¶†',
                                downloads: 1450,
                                avaliacao: 4.6,
                                tags: ['infec√ß√µes', 'preven√ß√£o', 'controle'],
                                publicado: true
                            },
                            {
                                id: 'esmi7',
                                titulo: 'Sa√∫de da Mulher em Idade Reprodutiva',
                                descricao: 'Cuidados espec√≠ficos para mulheres em idade reprodutiva.',
                                preco: 280,
                                preco_desconto: 220,
                                capa: 'üë©',
                                downloads: 1560,
                                avaliacao: 4.7,
                                tags: ['mulher', 'reprodutiva', 'sa√∫de'],
                                publicado: true
                            },
                            {
                                id: 'esmi8',
                                titulo: 'Pr√°tica de Obstetr√≠cia e Neonatologia',
                                descricao: 'Cuidados obst√©tricos e neonatais especializados.',
                                preco: 320,
                                preco_desconto: 250,
                                capa: 'ü§±',
                                downloads: 1950,
                                avaliacao: 4.9,
                                tags: ['obstetr√≠cia', 'neonatologia', 'parto'],
                                publicado: true
                            }
                        ]
                    },
                    3: {
                        nome: "III Semestre",
                        modulos: [
                            {
                                id: 'esmi9',
                                titulo: 'Aten√ß√£o √† Crian√ßa e SSRA',
                                descricao: 'Cuidados pedi√°tricos e sa√∫de sexual reprodutiva do adolescente.',
                                preco: 290,
                                preco_desconto: 230,
                                capa: 'üßí',
                                downloads: 1420,
                                avaliacao: 4.6,
                                tags: ['crian√ßa', 'adolescente', 'pediatria'],
                                publicado: true
                            },
                            {
                                id: 'esmi10',
                                titulo: 'Patologia Durante a Gravidez e Emerg√™ncias Obst√©tricas',
                                descricao: 'Complica√ß√µes na gravidez e emerg√™ncias no parto.',
                                preco: 310,
                                preco_desconto: 240,
                                capa: '‚ö†Ô∏è',
                                downloads: 1380,
                                avaliacao: 4.7,
                                tags: ['patologia', 'emerg√™ncias', 'complica√ß√µes'],
                                publicado: true
                            }
                        ]
                    },
                    4: {
                        nome: "IV Semestre",
                        modulos: [
                            {
                                id: 'esmi11',
                                titulo: 'Biosseguran√ßa e Investiga√ß√£o em Sa√∫de',
                                descricao: 'Pesquisa e biosseguran√ßa em sa√∫de materno-infantil.',
                                preco: 230,
                                preco_desconto: 170,
                                capa: 'üß™',
                                downloads: 1250,
                                avaliacao: 4.5,
                                tags: ['biosseguran√ßa', 'pesquisa', 'investiga√ß√£o'],
                                publicado: true
                            },
                            {
                                id: 'esmi12',
                                titulo: 'Sa√∫de da Comunidade e Envolvimento Comunit√°rio',
                                descricao: 'Trabalho comunit√°rio em sa√∫de materno-infantil.',
                                preco: 240,
                                preco_desconto: 180,
                                capa: 'üèòÔ∏è',
                                downloads: 1180,
                                avaliacao: 4.4,
                                tags: ['comunidade', 'comunit√°rio', 'envolvimento'],
                                publicado: true
                            },
                            {
                                id: 'esmi13',
                                titulo: 'Lideran√ßa e Gest√£o dos Servi√ßos da ESMI',
                                descricao: 'Gest√£o de servi√ßos especializados em ESMI.',
                                preco: 260,
                                preco_desconto: 200,
                                capa: 'üë®‚Äçüíº',
                                downloads: 1350,
                                avaliacao: 4.6,
                                tags: ['lideran√ßa', 'gest√£o', 'servi√ßos'],
                                publicado: true
                            },
                            {
                                id: 'esmi14',
                                titulo: 'Ensino em Enfermagem',
                                descricao: 'Metodologias de ensino para forma√ß√£o em ESMI.',
                                preco: 220,
                                preco_desconto: 160,
                                capa: 'üìö',
                                downloads: 1100,
                                avaliacao: 4.3,
                                tags: ['ensino', 'educa√ß√£o', 'forma√ß√£o'],
                                publicado: true
                            },
                            {
                                id: 'esmi15',
                                titulo: 'Est√°gio Rural e Integral',
                                descricao: 'Pr√°tica supervisionada em contextos rurais de ESMI.',
                                preco: 350,
                                preco_desconto: 280,
                                capa: 'üåæ',
                                downloads: 920,
                                avaliacao: 4.7,
                                tags: ['est√°gio', 'rural', 'pr√°tica'],
                                publicado: true
                            }
                        ]
                    }
                }
            }
        };

        // INICIALIZAR BANCO DE DADOS
        function initializeCatalog() {
            if (!localStorage.getItem('catalog_initialized')) {
                // Converter estrutura hier√°rquica para array plano
                const todosProdutos = [];
                
                Object.keys(cursosCompletos).forEach(cursoKey => {
                    const curso = cursosCompletos[cursoKey];
                    Object.keys(curso.semestres).forEach(semestreKey => {
                        const semestre = curso.semestres[semestreKey];
                        semestre.modulos.forEach(modulo => {
                            todosProdutos.push({
                                ...modulo,
                                curso: cursoKey,
                                ano: cursoKey === 'esmi' && semestreKey > 2 ? 2 : 1,
                                semestre: parseInt(semestreKey),
                                nome_curso: curso.nome,
                                nome_semestre: semestre.nome
                            });
                        });
                    });
                });
                
                localStorage.setItem('produtos', JSON.stringify(todosProdutos));
                localStorage.setItem('catalog_initialized', 'true');
            }
        }

        // CARREGAR E FILTRAR PRODUTOS
        function loadProducts(filters = {}) {
            const container = document.getElementById('productsContainer');
            const resultCount = document.getElementById('resultCount');
            
            let produtos = JSON.parse(localStorage.getItem('produtos')) || [];
            
            // Aplicar filtros
            if (filters.curso && filters.curso !== 'todos') {
                produtos = produtos.filter(p => p.curso === filters.curso);
            }
            
            if (filters.ano && filters.ano !== 'todos') {
                produtos = produtos.filter(p => p.ano == filters.ano);
            }
            
            if (filters.semestre && filters.semestre !== 'todos') {
                produtos = produtos.filter(p => p.semestre == filters.semestre);
            }
            
            if (filters.preco && filters.preco !== 'todos') {
                const [min, max] = filters.preco.split('-').map(Number);
                produtos = produtos.filter(p => {
                    const preco = p.preco_desconto || p.preco;
                    if (filters.preco === '350+') return preco >= 350;
                    return preco >= min && preco <= max;
                });
            }
            
            // Ordenar
            if (filters.ordenar) {
                switch(filters.ordenar) {
                    case 'recentes':
                        produtos.sort((a, b) => b.downloads - a.downloads);
                        break;
                    case 'popular':
                        produtos.sort((a, b) => b.avaliacao - a.avaliacao);
                        break;
                    case 'preco_asc':
                        produtos.sort((a, b) => (a.preco_desconto || a.preco) - (b.preco_desconto || b.preco));
                        break;
                    case 'preco_desc':
                        produtos.sort((a, b) => (b.preco_desconto || b.preco) - (a.preco_desconto || a.preco));
                        break;
                    case 'nome':
                        produtos.sort((a, b) => a.titulo.localeCompare(b.titulo));
                        break;
                }
            }
            
            // Agrupar por semestre
            const produtosPorSemestre = {};
            produtos.forEach(produto => {
                const key = `${produto.curso}-${produto.semestre}`;
                if (!produtosPorSemestre[key]) {
                    produtosPorSemestre[key] = {
                        curso: produto.curso,
                        semestre: produto.semestre,
                        nome_curso: produto.nome_curso,
                        nome_semestre: produto.nome_semestre,
                        produtos: []
                    };
                }
                produtosPorSemestre[key].produtos.push(produto);
            });
            
            // Renderizar
            let html = '';
            Object.values(produtosPorSemestre).forEach(grupo => {
                html += `
                    <div class="semester-header fade-in">
                        <h3 class="semester-title">${grupo.nome_curso}</h3>
                        <p class="semester-subtitle">${grupo.nome_semestre} ‚Ä¢ ${grupo.produtos.length} m√≥dulos</p>
                    </div>
                `;
                
                grupo.produtos.forEach(produto => {
                    html += `
                        <div class="product-card fade-in" onclick="viewProduct('${produto.id}')">
                            ${produto.preco_desconto ? '<span class="product-badge">PROMO</span>' : ''}
                            <div class="product-image">
                                ${produto.capa}
                            </div>
                            <h3 class="product-title">${produto.titulo}</h3>
                            <div class="product-meta">
                                <span>${produto.nome_curso}</span>
                                <span>Sem ${produto.semestre}</span>
                            </div>
                            <p style="color: #94a3b8; font-size: 0.9rem; margin-bottom: 15px; line-height: 1.4;">
                                ${produto.descricao.substring(0, 80)}...
                            </p>
                            <div class="price-container">
                                ${produto.preco_desconto ? `
                                    <span class="old-price">${produto.preco} MT</span>
                                    <span class="new-price">${produto.preco_desconto} MT</span>
                                ` : `
                                    <span class="new-price">${produto.preco} MT</span>
                                `}
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                                <div style="display: flex; gap: 5px; color: #fbbf24;">
                                    ${'‚òÖ'.repeat(Math.floor(produto.avaliacao))}${'‚òÜ'.repeat(5 - Math.floor(produto.avaliacao))}
                                    <span style="color: #94a3b8; font-size: 0.9rem;">(${produto.avaliacao})</span>
                                </div>
                                <span style="color: #94a3b8; font-size: 0.9rem;">
                                    <i class="fas fa-download"></i> ${produto.downloads}
                                </span>
                            </div>
                            <div style="margin-top: 20px; display: flex; gap: 10px;">
                                <button class="btn-secondary" onclick="event.stopPropagation(); addToCart('${produto.id}')">
                                    <i class="fas fa-cart-plus"></i> Adicionar
                                </button>
                                <button class="btn-primary" onclick="event.stopPropagation(); viewProduct('${produto.id}')">
                                    <i class="fas fa-eye"></i> Detalhes
                                </button>
                            </div>
                        </div>
                    `;
                });
            });
            
            container.innerHTML = html || `
                <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
                    <i class="fas fa-search" style="font-size: 3rem; color: #94a3b8; margin-bottom: 20px;"></i>
                    <h3 style="color: #94a3b8; margin-bottom: 10px;">Nenhum produto encontrado</h3>
                    <p style="color: #64748b;">Tente ajustar os filtros ou selecione outro curso</p>
                </div>
            `;
            
            resultCount.textContent = produtos.length;
            
            // Adicionar estilos de bot√µes
            addButtonStyles();
        }

        // CONFIGURAR FILTROS
        function setupFilters() {
            const cursoTabs = document.querySelectorAll('.course-tab');
            const filterAno = document.getElementById('filterAno');
            const filterSemestre = document.getElementById('filterSemestre');
            const filterOrdenar = document.getElementById('filterOrdenar');
            const filterPreco = document.getElementById('filterPreco');
            
            const filters = {
                curso: 'todos',
                ano: 'todos',
                semestre: 'todos',
                ordenar: 'recentes',
                preco: 'todos'
            };
            
            // Verificar par√¢metro da URL
            const urlParams = new URLSearchParams(window.location.search);
            const cursoFromUrl = urlParams.get('curso');
            if (cursoFromUrl && ['enfermagem', 'esmi'].includes(cursoFromUrl)) {
                filters.curso = cursoFromUrl;
                // Ativar tab correspondente
                cursoTabs.forEach(tab => {
                    tab.classList.remove('active');
                    if (tab.dataset.curso === cursoFromUrl) {
                        tab.classList.add('active');
                    }
                });
            }
            
            // Abas de curso
            cursoTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    cursoTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    filters.curso = tab.dataset.curso;
                    loadProducts(filters);
                });
            });
            
            // Outros filtros
            const filterElements = [filterAno, filterSemestre, filterOrdenar, filterPreco];
            filterElements.forEach(element => {
                element.addEventListener('change', () => {
                    filters.ano = filterAno.value;
                    filters.semestre = filterSemestre.value;
                    filters.ordenar = filterOrdenar.value;
                    filters.preco = filterPreco.value;
                    loadProducts(filters);
                });
            });
            
            // Carregar produtos iniciais
            loadProducts(filters);
        }

        // FUN√á√ïES UTILIT√ÅRIAS
        function addButtonStyles() {
            if (!document.querySelector('#button-styles')) {
                const style = document.createElement('style');
                style.id = 'button-styles';
                style.textContent = `
                    .btn-primary, .btn-secondary {
                        padding: 12px 20px;
                        border-radius: var(--radius-small);
                        border: none;
                        font-weight: 600;
                        cursor: pointer;
                        transition: var(--transition);
                        display: inline-flex;
                        align-items: center;
                        gap: 8px;
                        font-size: 0.9rem;
                        flex: 1;
                        justify-content: center;
                    }
                    
                    .btn-primary {
                        background: linear-gradient(135deg, var(--primary), var(--primary-dark));
                        color: white;
                    }
                    
                    .btn-secondary {
                        background: var(--glass);
                        border: 1px solid var(--border-glow);
                        color: var(--light);
                    }
                    
                    .btn-primary:hover {
                        transform: translateY(-2px);
                        box-shadow: 0 10px 25px rgba(99, 102, 241, 0.4);
                    }
                    
                    .btn-secondary:hover {
                        background: rgba(99, 102, 241, 0.2);
                        border-color: var(--primary);
                    }
                `;
                document.head.appendChild(style);
            }
        }

        function updateCartCount() {
            const carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
            const count = carrinho.reduce((total, item) => total + (item.quantidade || 1), 0);
            document.getElementById('cartCount').textContent = count;
        }

        function addToCart(productId) {
            let carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
            const produtoExistente = carrinho.find(item => item.id === productId);
            
            if (produtoExistente) {
                produtoExistente.quantidade += 1;
            } else {
                carrinho.push({
                    id: productId,
                    quantidade: 1,
                    added: new Date().toISOString()
                });
            }
            
            localStorage.setItem('carrinho', JSON.stringify(carrinho));
            updateCartCount();
            showNotification('Adicionado ao carrinho!', 'success');
        }

        function viewProduct(productId) {
            window.location.href = `produto.html?id=${productId}`;
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'info-circle'}"></i>
                <span>${message}</span>
            `;
            
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: ${type === 'success' ? '#10b981' : '#6366f1'};
                color: white;
                padding: 15px 25px;
                border-radius: var(--radius-small);
                display: flex;
                align-items: center;
                gap: 10px;
                z-index: 9999;
                animation: slideIn 0.3s ease-out;
                box-shadow: var(--shadow);
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
            
            if (!document.querySelector('#notification-styles')) {
                const style = document.createElement('style');
                style.id = 'notification-styles';
                style.textContent = `
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOut {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        }

        // INICIALIZAR
        document.addEventListener('DOMContentLoaded', () => {
            initializeCatalog();
            setupFilters();
            updateCartCount();
        });
    </script>
</body>
</html>